{% load l10n %}
<!-- Reusable Movement Card with Collapsible Details -->
<!-- Variables: mov, show_checkbox (bool), show_tipo (bool), show_origem (bool), show_caixa (bool) -->

<div class="bg-white dark:bg-[#2B2C30] rounded-xl border border-slate-200 dark:border-[#2d3544] overflow-hidden transition-colors shadow-sm dark:shadow-none"
     {% if show_origem %}data-imp-id="{{ mov.pk }}" data-saldo="{{ mov.saldo_pendente|unlocalize }}" data-valor-total="{{ mov.valor|unlocalize }}" data-recebido="{{ mov.valor_recebido|unlocalize }}" data-protocolo="{{ mov.protocolo|floatformat:0|default:'—' }}" data-descricao="{{ mov.descricao|default:'' }}"{% endif %}
     {% if show_checkbox %}:class="selected.includes('{{ mov.pk }}') ? 'border-primary/50 bg-primary/5' : ''"{% endif %}
     x-data="{ details: false, showPayments: false }">

    <!-- Main Row -->
    <div class="flex items-center gap-3 px-4 py-3">
        <!-- Checkbox (conditional) -->
        {% if show_checkbox %}
        <input type="checkbox" value="{{ mov.pk }}" x-model="selected"
               class="w-4 h-4 text-primary rounded focus:ring-primary shrink-0">
        {% endif %}

        <!-- Info: two rows stacked -->
        <div class="flex-1 min-w-0 space-y-1">
            <!-- Row 1: Protocolo | Descrição | Status/Tipo | Emolumento | Taxas | Total | Badge -->
            <div class="flex items-center gap-4 overflow-hidden">
                <span class="text-sm font-mono text-slate-700 dark:text-slate-200 shrink-0 whitespace-nowrap" title="Protocolo: {{ mov.protocolo|floatformat:0 }}">Protocolo: {{ mov.protocolo|floatformat:0|default:"—" }}</span>
                <span class="text-sm text-slate-600 dark:text-slate-300 truncate flex-1 min-w-0 max-w-[250px]" title="{{ mov.descricao }}">{{ mov.descricao|default:"—" }}</span>

                {% if show_tipo %}
                <!-- Tipo Badge (MovimentoCaixa) -->
                {% if mov.tipo == 'ENTRADA' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 font-bold shrink-0">Entrada</span>
                {% elif mov.tipo == 'SAIDA' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-red-500/20 text-red-600 dark:text-red-400 font-bold shrink-0">Saída</span>
                {% elif mov.tipo == 'SANGRIA' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-orange-500/20 text-orange-600 dark:text-orange-400 font-bold shrink-0">Sangria</span>
                {% elif mov.tipo == 'SUPRIMENTO' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-600 dark:text-blue-400 font-bold shrink-0">Suprimento</span>
                {% elif mov.tipo == 'ESTORNO' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-slate-500/20 text-slate-600 dark:text-slate-400 font-bold shrink-0">Estorno</span>
                {% endif %}

                <!-- Payment Status Badge (from original import) -->
                {% with imp_ref=mov.importacao_origem.first %}
                {% if imp_ref and imp_ref.parcelas.count > 1 %}
                    {% if imp_ref.status_recebimento == 'QUITADO' %}
                    <span class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 font-bold shrink-0 flex items-center gap-0.5 cursor-pointer"
                          @click.stop="showPayments = !showPayments"
                          title="Protocolo quitado em {{ imp_ref.parcelas.count }} parcelas — clique para ver histórico">
                        <span class="material-symbols-outlined text-[10px]">check_circle</span>
                        Quitado ({{ mov.parcela_recebimento.first.numero_parcela }}/{{ imp_ref.parcelas.count }})
                    </span>
                    {% else %}
                    <span class="text-[10px] px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-600 dark:text-amber-400 font-bold shrink-0 flex items-center gap-0.5 cursor-pointer"
                          @click.stop="showPayments = !showPayments"
                          title="Protocolo pago parcialmente — clique para ver histórico">
                        <span class="material-symbols-outlined text-[10px]">hourglass_top</span>
                        Pgto. Parcial ({{ mov.parcela_recebimento.first.numero_parcela }}/{{ imp_ref.parcelas.count }})
                    </span>
                    {% endif %}
                {% elif imp_ref and imp_ref.status_recebimento == 'QUITADO' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 font-bold shrink-0 flex items-center gap-0.5">
                    <span class="material-symbols-outlined text-[10px]">check_circle</span>
                    Quitado
                </span>
                {% endif %}
                {% endwith %}
                {% else %}
                <!-- Status Badge (MovimentoImportado) - removido: valor bruto do sistema externo sem contexto -->

                <!-- Status Recebimento Badge -->
                {% if mov.status_recebimento == 'PARCIAL' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-600 dark:text-amber-400 font-bold shrink-0 flex items-center gap-0.5">
                    <span class="material-symbols-outlined text-[10px]">hourglass_top</span>
                    PARCIAL ({{ mov.percentual_recebido }}%)
                </span>
                {% elif mov.status_recebimento == 'QUITADO' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 font-bold shrink-0 flex items-center gap-0.5">
                    <span class="material-symbols-outlined text-[10px]">check_circle</span>
                    QUITADO
                </span>
                {% elif mov.status_recebimento == 'VENCIDO' %}
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-red-500/20 text-red-600 dark:text-red-400 font-bold shrink-0 flex items-center gap-0.5">
                    <span class="material-symbols-outlined text-[10px]">warning</span>
                    VENCIDO
                </span>
                {% endif %}
                {% endif %}

                <!-- Values -->
                <div class="flex items-center gap-3 shrink-0 text-right ml-auto">
                    <div class="w-[90px]">
                        <span class="text-[9px] uppercase text-slate-400 dark:text-slate-500 block leading-none">Emolumento</span>
                        <span class="text-xs font-mono text-slate-700 dark:text-slate-200">R$ {{ mov.emolumento|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="w-[80px]">
                        <span class="text-[9px] uppercase text-slate-400 dark:text-slate-500 block leading-none">Taxas</span>
                        {% with fundos=mov.valor_total_fundos %}
                        <span class="text-xs font-mono {% if fundos %}text-blue-600 dark:text-blue-400{% else %}text-slate-400 dark:text-slate-500{% endif %}">R$ {{ fundos|floatformat:2 }}</span>
                        {% endwith %}
                    </div>
                    <div class="w-[90px]">
                        <span class="text-[9px] uppercase text-slate-400 dark:text-slate-500 block leading-none">Total</span>
                        {% with total=mov.valor_total_taxas %}
                        <span class="text-xs font-mono font-bold {% if total %}text-emerald-600 dark:text-emerald-400{% else %}text-slate-400 dark:text-slate-500{% endif %}">R$ {{ total|floatformat:2 }}</span>
                        {% endwith %}
                    </div>
                    {% if show_tipo and mov.valor and mov.valor != mov.valor_total_taxas %}
                    <div class="w-[90px]">
                        <span class="text-[9px] uppercase text-amber-500 dark:text-amber-400 block leading-none">Valor Pago</span>
                        <span class="text-xs font-mono font-bold text-amber-600 dark:text-amber-400">R$ {{ mov.valor|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                    {% if show_tipo %}
                    {% with imp=mov.importado_origem %}
                    {% if imp and imp.saldo_pendente > 0 %}
                    <div class="w-[90px]">
                        <span class="text-[9px] uppercase text-red-500 dark:text-red-400 block leading-none">Pendente</span>
                        <span class="text-xs font-mono font-bold text-red-500 dark:text-red-400">R$ {{ imp.saldo_pendente|floatformat:2 }}</span>
                    </div>
                    {% endif %}
                    {% endwith %}
                    {% endif %}
                </div>

                <!-- Partial payment value now handled by confirmation modal -->

                {% if show_origem %}
                <!-- Origem badge (importados) -->
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium shrink-0 max-w-[180px] truncate"
                      title="{{ mov.conexao.sistema|default:'—' }} - {{ mov.rotina.nome|default:'—' }}">
                    {{ mov.conexao.sistema|default:"—" }} - {{ mov.rotina.nome|default:"—" }}
                </span>
                {% endif %}

                {% if show_caixa %}
                <!-- Caixa badge (dashboards) -->
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium shrink-0" title="{{ mov.abertura.caixa.identificador }}">
                    {{ mov.abertura.caixa.identificador }}
                </span>
                {% endif %}
            </div>

            <!-- Row 2: Subtitle -->
            <div class="flex items-center gap-2 pl-0">
                {% if mov.cliente_nome %}
                    <span class="text-[11px] text-primary font-medium truncate flex items-center gap-1" title="{{ mov.cliente_nome }}">
                        <span class="material-symbols-outlined text-[11px] text-primary">person</span>
                        {{ mov.cliente_nome }}
                    </span>
                {% elif show_tipo and mov.cliente %}
                    <span class="text-[11px] text-primary font-medium truncate flex items-center gap-1" title="{{ mov.cliente.razao_social }}">
                        <span class="material-symbols-outlined text-[11px] text-primary">person</span>
                        {{ mov.cliente.razao_social }}
                    </span>
                {% endif %}
                {% if show_tipo and mov.forma_pagamento %}
                <span class="text-[10px] px-2 py-0.5 rounded-full font-bold flex items-center gap-0.5 shrink-0
                    {% if mov.forma_pagamento.tipo == 'DINHEIRO' %}bg-emerald-500/20 text-emerald-600 dark:text-emerald-400
                    {% elif mov.forma_pagamento.tipo == 'PIX' %}bg-cyan-500/20 text-cyan-600 dark:text-cyan-400
                    {% elif mov.forma_pagamento.tipo == 'DEBITO' %}bg-blue-500/20 text-blue-600 dark:text-blue-400
                    {% elif mov.forma_pagamento.tipo == 'CREDITO' %}bg-purple-500/20 text-purple-600 dark:text-purple-400
                    {% elif mov.forma_pagamento.tipo == 'BOLETO' %}bg-amber-500/20 text-amber-600 dark:text-amber-400
                    {% elif mov.forma_pagamento.tipo == 'TRANSFERENCIA' %}bg-indigo-500/20 text-indigo-600 dark:text-indigo-400
                    {% elif mov.forma_pagamento.tipo == 'CHEQUE' %}bg-slate-500/20 text-slate-600 dark:text-slate-400
                    {% else %}bg-gray-500/20 text-gray-600 dark:text-gray-400
                    {% endif %}">
                    <span class="material-symbols-outlined text-[10px]">payments</span>
                    {{ mov.forma_pagamento.nome }}
                </span>
                {% endif %}
                {% if mov.data_ato %}
                <span class="text-[10px] text-slate-500 dark:text-slate-400 flex items-center gap-0.5 shrink-0">
                    <span class="material-symbols-outlined text-[10px]">calendar_today</span>
                    Ato: {{ mov.data_ato|date:"d/m/Y" }}
                </span>
                {% endif %}
                {% if show_origem and mov.importado_em %}
                <span class="text-[10px] text-slate-400 dark:text-slate-500 flex items-center gap-0.5 shrink-0">
                    <span class="material-symbols-outlined text-[10px]">schedule</span>
                    Importado: {{ mov.importado_em|date:"d/m H:i" }}
                </span>
                {% endif %}
            </div>

            <!-- Progress Bar (for PARCIAL status) -->
            {% if mov.status_recebimento == 'PARCIAL' %}
            <div class="flex items-center gap-2 pl-0">
                <div class="flex-1 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                    <div class="h-full bg-amber-500 rounded-full transition-all" style="width: {{ mov.percentual_recebido }}%"></div>
                </div>
                <span class="text-[10px] text-amber-600 dark:text-amber-400 font-mono shrink-0">
                    R$ {{ mov.valor_recebido|floatformat:2 }} / {{ mov.valor|floatformat:2 }}
                </span>
            </div>
            {% endif %}
        </div>

        <!-- Ver Atos Button (only if has children) -->
        {% if mov.itens_count %}
        <button type="button"
           onclick="(function(btn){var url='{% url 'caixa:itens_ato' model_type=model_type pk=mov.pk %}';fetch(url,{headers:{'X-Requested-With':'XMLHttpRequest'}}).then(function(r){return r.text()}).then(function(html){var mc=document.getElementById('modal-content');if(mc)mc.innerHTML=html;var root=document.getElementById('movimentos-root');if(root&&window.Alpine)Alpine.$data(root).open=true;}).catch(function(e){console.error('Ver Atos error:',e)})})(this)"
           class="shrink-0 p-1.5 rounded-lg hover:bg-primary/10 transition-colors group"
           title="Ver atos detalhados ({{ mov.itens_count }})">
            <span class="material-symbols-outlined text-primary text-lg group-hover:scale-110 transition-transform">list_alt</span>
        </button>
        {% endif %}

        <!-- Imprimir Recibo Button (only for confirmed movements) -->
        {% if model_type == 'movimento' %}
        <a href="{% url 'caixa:recibo_detalhado' pk=mov.pk %}"
           target="_blank"
           class="shrink-0 p-1.5 rounded-lg hover:bg-emerald-500/10 transition-colors group"
           title="Imprimir recibo detalhado">
            <span class="material-symbols-outlined text-emerald-600 dark:text-emerald-400 text-lg group-hover:scale-110 transition-transform">receipt_long</span>
        </a>
        {% endif %}

        <!-- Expand Toggle -->
        <button @click="details = !details" class="shrink-0 p-1 rounded hover:bg-slate-100 dark:hover:bg-[#2d3544] transition-colors">
            <span class="material-symbols-outlined text-slate-400 text-lg transition-transform" :class="details ? 'rotate-180' : ''">expand_more</span>
        </button>
    </div>

    <!-- Payment History Accordion (for partial payments) -->
    {% if show_tipo and mov.parcela_recebimento.exists %}
    {% with parcela=mov.parcela_recebimento.first %}
    {% with imp=parcela.movimento_importado %}
    <div x-show="showPayments" x-collapse class="border-t border-amber-500/20">
        <div class="px-5 py-3 bg-amber-50/50 dark:bg-amber-500/5">
            <div class="flex items-center gap-2 mb-3">
                <span class="material-symbols-outlined text-amber-500 text-sm">receipt_long</span>
                <span class="text-xs font-bold text-amber-700 dark:text-amber-400">Pagamentos Realizados — Protocolo {{ imp.protocolo|floatformat:0|default:'—' }}</span>
                <span class="text-[10px] px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-600 dark:text-amber-400 font-bold">{{ imp.parcelas.count }} pagamento{{ imp.parcelas.count|pluralize:"s" }}</span>
            </div>
            <div class="space-y-1.5">
                {% for p in imp.parcelas.all %}
                <div class="flex items-center gap-3 px-3 py-2 rounded-lg text-xs {% if p.pk == parcela.pk %}bg-amber-500/10 border border-amber-500/30{% else %}bg-white/60 dark:bg-[#2B2C30] border border-slate-200 dark:border-[#2d3544]{% endif %}">
                    <span class="font-mono font-bold text-slate-600 dark:text-slate-300 w-6 text-center">#{{ p.numero_parcela }}</span>
                    <span class="font-mono font-bold text-emerald-600 dark:text-emerald-400 w-[90px]">R$ {{ p.valor|floatformat:2 }}</span>
                    <span class="text-slate-500 dark:text-slate-400 flex items-center gap-0.5">
                        <span class="material-symbols-outlined text-[10px]">payments</span>
                        {{ p.forma_pagamento.nome|default:'—' }}
                    </span>
                    <span class="text-slate-500 dark:text-slate-400 flex items-center gap-0.5 ml-auto">
                        <span class="material-symbols-outlined text-[10px]">schedule</span>
                        {{ p.recebido_em|date:"d/m/Y H:i" }}
                    </span>
                    <span class="text-slate-500 dark:text-slate-400 flex items-center gap-0.5">
                        <span class="material-symbols-outlined text-[10px]">person</span>
                        {{ p.recebido_por.get_short_name|default:p.recebido_por.username }}
                    </span>
                    {% if p.pk == parcela.pk %}
                    <span class="text-[9px] px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-600 dark:text-amber-400 font-bold">atual</span>
                    {% endif %}
                </div>
                {% endfor %}
                {% if imp.saldo_pendente > 0 %}
                <div class="flex items-center gap-3 px-3 py-2 rounded-lg text-xs bg-red-50/50 dark:bg-red-500/5 border border-dashed border-red-300 dark:border-red-500/30">
                    <span class="font-mono font-bold text-slate-400 w-6 text-center">#{{ imp.parcelas.count|add:1 }}</span>
                    <span class="font-mono font-bold text-red-500 dark:text-red-400 w-[90px]">R$ {{ imp.saldo_pendente|floatformat:2 }}</span>
                    <span class="text-red-500 dark:text-red-400 italic">Saldo pendente</span>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endwith %}
    {% endwith %}
    {% endif %}

    <!-- Details Accordion -->
    <div x-show="details" x-collapse class="border-t border-slate-200 dark:border-[#2d3544]">
        <div class="px-5 py-4 space-y-3">
            <!-- Row 1: Meta Info -->
            <div class="flex items-center gap-6 text-xs flex-wrap">
                {% if mov.status_item %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Status:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.status_item }}</span>
                </div>
                {% endif %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">QTD:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.quantidade|default:"1" }}</span>
                </div>
                {% if show_origem %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Origem:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.conexao.sistema|default:"—" }} — {{ mov.rotina.nome|default:"—" }}</span>
                </div>
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Importado em:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.importado_em|date:"d/m/Y H:i" }}</span>
                </div>
                {% endif %}
                {% if show_tipo %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Data:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.data_hora|date:"d/m/Y H:i" }}</span>
                </div>
                {% if show_caixa %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Operador:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.abertura.operador.first_name|default:mov.abertura.operador.email }}</span>
                </div>
                {% endif %}
                {% if mov.forma_pagamento %}
                <div>
                    <span class="text-slate-400 dark:text-slate-500">Forma Pagto:</span>
                    <span class="text-slate-700 dark:text-slate-300 font-medium ml-1">{{ mov.forma_pagamento.nome }}</span>
                </div>
                {% endif %}
                {% endif %}
            </div>

            <!-- Installment History (for PARCIAL imports) -->
            {% if show_origem and mov.parcelas.all %}
            <div class="mt-2">
                <span class="text-[10px] uppercase tracking-wider text-slate-400 dark:text-slate-500 font-bold block mb-1">Histórico de Parcelas</span>
                <div class="space-y-1">
                    {% for p in mov.parcelas.all %}
                    <div class="flex items-center gap-3 text-xs py-1 px-2 rounded bg-slate-50 dark:bg-[#1E1F23]">
                        <span class="font-bold text-primary w-[60px]">Parcela {{ p.numero_parcela }}</span>
                        <span class="font-mono text-slate-700 dark:text-slate-200">R$ {{ p.valor|floatformat:2 }}</span>
                        <span class="text-slate-400 dark:text-slate-500">{{ p.recebido_em|date:"d/m/Y H:i" }}</span>
                        <span class="text-slate-400 dark:text-slate-500">{{ p.forma_pagamento.nome }}</span>
                        <span class="text-slate-400 dark:text-slate-500 ml-auto">{{ p.recebido_por.first_name|default:p.recebido_por.email }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Row 2: All Taxes Grid -->
            <div>
                <span class="text-[10px] uppercase tracking-wider text-slate-400 dark:text-slate-500 font-bold block mb-2">Taxas Detalhadas</span>
                <div class="grid grid-cols-5 gap-x-6 gap-y-1.5">
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">Tx Judiciária</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.taxa_judiciaria|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">ISS</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.iss|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNDESP</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fundesp|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNESP</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.funesp|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">Estado</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.estado|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FESEMPS</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fesemps|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNEMP</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.funemp|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNCOMP</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.funcomp|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FEPADSAJ</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fepadsaj|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNPROGE</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.funproge|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNDEPEG</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fundepeg|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FUNDAF</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fundaf|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FEMAL</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.femal|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">FECAD</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.fecad|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">Rec. Adic. 1</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.valor_receita_adicional_1|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500">Rec. Adic. 2</span>
                        <span class="font-mono text-slate-700 dark:text-slate-300">R$ {{ mov.valor_receita_adicional_2|default:"0"|floatformat:2 }}</span>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-slate-400 dark:text-slate-500 font-bold">Emolumento</span>
                        <span class="font-mono font-bold text-primary">R$ {{ mov.emolumento|default:"0"|floatformat:2 }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
