{% extends "relatorios/base_relatorio.html" %}

{% block report_content %}
<!-- Tabela de Fechamentos Pendentes -->
<div class="bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-border-dark shadow-sm overflow-hidden">
    <div class="px-6 py-4 border-b border-slate-200 dark:border-border-dark flex items-center justify-between">
        <div class="flex items-center gap-2">
            <span class="material-symbols-outlined text-warning">pending_actions</span>
            <h4 class="font-bold">Aguardando Aprovação</h4>
        </div>
        <span class="px-3 py-1 rounded-full text-xs font-bold bg-warning/10 text-warning">
            {{ fechamentos|length }} pendente{{ fechamentos|length|pluralize:"s" }}
        </span>
    </div>
    
    {% if fechamentos %}
    <div class="divide-y divide-slate-100 dark:divide-border-dark">
        {% for fechamento in fechamentos %}
        <div class="p-6 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="size-12 rounded-lg bg-warning/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-warning">point_of_sale</span>
                </div>
                <div>
                    <p class="font-semibold">{{ fechamento.abertura.caixa.identificador }}</p>
                    <p class="text-sm text-slate-500">{{ fechamento.operador.first_name|default:fechamento.operador.email }}</p>
                </div>
            </div>
            <div class="text-center">
                <p class="text-sm font-medium">{{ fechamento.data_hora|date:"d/m/Y H:i" }}</p>
                <p class="text-xs text-slate-500">Fechamento solicitado</p>
            </div>
            <div class="text-right">
                <p class="text-lg font-bold {% if fechamento.diferenca == 0 %}text-success{% else %}text-danger{% endif %}">
                    R$ {{ fechamento.diferenca|floatformat:2 }}
                </p>
                <p class="text-xs text-slate-500">Diferença</p>
            </div>
            <div class="flex gap-2">
                <button class="px-4 py-2 bg-success text-white rounded-lg text-sm font-semibold hover:bg-success/90 transition-colors">
                    <span class="material-symbols-outlined text-sm align-middle mr-1">check</span>
                    Aprovar
                </button>
                <button class="px-4 py-2 bg-danger text-white rounded-lg text-sm font-semibold hover:bg-danger/90 transition-colors">
                    <span class="material-symbols-outlined text-sm align-middle mr-1">close</span>
                    Rejeitar
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="p-12 text-center">
        <div class="size-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-4">
            <span class="material-symbols-outlined text-success text-3xl">check_circle</span>
        </div>
        <h4 class="font-semibold mb-2">Nenhum fechamento pendente</h4>
        <p class="text-slate-500 text-sm">Todos os fechamentos foram aprovados ou rejeitados.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
