============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Rodrigo\AppData\Local\Programs\Python\Python314\python.exe
cachedir: .pytest_cache
django: version: 6.0.1, settings: caixa_nfse.settings.test (from option)
rootdir: C:\Users\Rodrigo\Projetos\wCaixaDigital
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.1, Faker-40.1.2, django-4.11.1
collecting ... collected 34 items

caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:movimentacoes] FAILED [  2%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:resumo_caixa] FAILED [  5%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:formas_pagamento] FAILED [  8%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:performance_operador] FAILED [ 11%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:historico_aberturas] FAILED [ 14%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:diferencas_caixa] FAILED [ 17%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:log_acoes] FAILED [ 20%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:movimentacoes] FAILED [ 23%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:resumo_caixa] FAILED [ 26%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:formas_pagamento] FAILED [ 29%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:performance_operador] FAILED [ 32%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:historico_aberturas] FAILED [ 35%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:diferencas_caixa] FAILED [ 38%]
caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:log_acoes] FAILED [ 41%]
caixa_nfse/relatorios/tests/test_views.py::TestRelatoriosPermissions::test_acesso_negado_nao_gerente PASSED [ 44%]
caixa_nfse/relatorios/tests/test_views.py::TestRelatoriosPermissions::test_acesso_permitido_gerente PASSED [ 47%]
caixa_nfse/relatorios/tests/test_views.py::TestMovimentacoesReportView::test_list_movimentacoes PASSED [ 50%]
caixa_nfse/relatorios/tests/test_views.py::TestMovimentacoesReportView::test_filter_by_date FAILED [ 52%]
caixa_nfse/relatorios/tests/test_views.py::TestMovimentacoesReportView::test_export_pdf_trigger FAILED [ 55%]
caixa_nfse/relatorios/tests/test_views.py::TestResumoCaixaReportView::test_resumo_calculo PASSED [ 58%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_formas_pagamento PASSED [ 61%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_performance_operador PASSED [ 64%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_historico_aberturas PASSED [ 67%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_diferencas_caixa PASSED [ 70%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_log_acoes PASSED [ 73%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_fechamentos_pendentes PASSED [ 76%]
caixa_nfse/relatorios/tests/test_views.py::TestOtherReports::test_dashboard_context PASSED [ 79%]
caixa_nfse/relatorios/tests/test_services.py::TestFormatCurrency::test_format_currency_none PASSED [ 82%]
caixa_nfse/relatorios/tests/test_services.py::TestFormatCurrency::test_format_currency_float PASSED [ 85%]
caixa_nfse/relatorios/tests/test_services.py::TestFormatCurrency::test_format_currency_decimal PASSED [ 88%]
caixa_nfse/relatorios/tests/test_services.py::TestExportServicePDF::test_to_pdf_missing_dependency PASSED [ 91%]
caixa_nfse/relatorios/tests/test_services.py::TestExportServicePDF::test_to_pdf_success PASSED [ 94%]
caixa_nfse/relatorios/tests/test_services.py::TestExportServiceXLSX::test_to_xlsx_missing_dependency PASSED [ 97%]
caixa_nfse/relatorios/tests/test_services.py::TestExportServiceXLSX::test_to_xlsx_success PASSED [100%]

================================== FAILURES ===================================
_______ TestAllExports.test_export_pdf_mocked[relatorios:movimentacoes] _______
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
---------------------------- Captured stderr setup ----------------------------
Creating test database for alias 'default'...

_______ TestAllExports.test_export_pdf_mocked[relatorios:resumo_caixa] ________
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_____ TestAllExports.test_export_pdf_mocked[relatorios:formas_pagamento] ______
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
___ TestAllExports.test_export_pdf_mocked[relatorios:performance_operador] ____
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
____ TestAllExports.test_export_pdf_mocked[relatorios:historico_aberturas] ____
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_____ TestAllExports.test_export_pdf_mocked[relatorios:diferencas_caixa] ______
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_________ TestAllExports.test_export_pdf_mocked[relatorios:log_acoes] _________
caixa_nfse\relatorios\tests\test_exports.py:67: in test_export_pdf_mocked
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
______ TestAllExports.test_export_xlsx_mocked[relatorios:movimentacoes] _______
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_______ TestAllExports.test_export_xlsx_mocked[relatorios:resumo_caixa] _______
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_____ TestAllExports.test_export_xlsx_mocked[relatorios:formas_pagamento] _____
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
___ TestAllExports.test_export_xlsx_mocked[relatorios:performance_operador] ___
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
___ TestAllExports.test_export_xlsx_mocked[relatorios:historico_aberturas] ____
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_____ TestAllExports.test_export_xlsx_mocked[relatorios:diferencas_caixa] _____
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
________ TestAllExports.test_export_xlsx_mocked[relatorios:log_acoes] _________
caixa_nfse\relatorios\tests\test_exports.py:92: in test_export_xlsx_mocked
    response = self.client.get(url, {"export": "xlsx"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'get'
_______________ TestMovimentacoesReportView.test_filter_by_date _______________
caixa_nfse\relatorios\tests\test_views.py:77: in test_filter_by_date
    assert self.movimento in movimentos
E   assert <MovimentoCaixa: Entrada - R$ 100.0> in <QuerySet []>
E    +  where <MovimentoCaixa: Entrada - R$ 100.0> = <caixa_nfse.relatorios.tests.test_views.TestMovimentacoesReportView object at 0x0000014F89B08CD0>.movimento
_____________ TestMovimentacoesReportView.test_export_pdf_trigger _____________
caixa_nfse\relatorios\tests\test_views.py:84: in test_export_pdf_trigger
    response = self.client.get(url, {"export": "pdf"})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1124: in get
    response = super().get(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:475: in get
    return self.generic(
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:671: in generic
    return self.request(**r)
           ^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:1087: in request
    self.check_exception(response)
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\test\client.py:802: in check_exception
    raise exc_value
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\core\handlers\exception.py:55: in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\utils\deprecation.py:311: in __call__
    response = self.process_response(request, response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Local\Programs\Python\Python314\Lib\site-packages\django\middleware\clickjacking.py:27: in process_response
    if response.get("X-Frame-Options") is not None:
       ^^^^^^^^^^^^
E   AttributeError: 'bytes' object has no attribute 'get'
============================== warnings summary ===============================
caixa_nfse/relatorios/tests/test_exports.py: 28 warnings
caixa_nfse/relatorios/tests/test_views.py: 24 warnings
  C:\Users\Rodrigo\AppData\Local\Programs\Python\Python314\Lib\site-packages\factory\django.py:182: DeprecationWarning: UserFactory._after_postgeneration will stop saving the instance after postgeneration hooks in the next major release.
  If the save call is extraneous, set skip_postgeneration_save=True in the UserFactory.Meta.
  To keep saving the instance, move the save call to your postgeneration hooks or override _after_postgeneration.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:movimentacoes]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:resumo_caixa]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:formas_pagamento]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:performance_operador]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:historico_aberturas]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:diferencas_caixa]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_pdf_mocked[relatorios:log_acoes]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:movimentacoes]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:resumo_caixa]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:formas_pagamento]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:performance_operador]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:historico_aberturas]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:diferencas_caixa]
FAILED caixa_nfse/relatorios/tests/test_exports.py::TestAllExports::test_export_xlsx_mocked[relatorios:log_acoes]
FAILED caixa_nfse/relatorios/tests/test_views.py::TestMovimentacoesReportView::test_filter_by_date
FAILED caixa_nfse/relatorios/tests/test_views.py::TestMovimentacoesReportView::test_export_pdf_trigger
================= 16 failed, 18 passed, 52 warnings in 2.65s ==================
