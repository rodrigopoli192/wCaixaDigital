============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0
django: version: 5.2.11, settings: caixa_nfse.settings.test (from ini)
rootdir: C:\Users\Rodrigo\Projetos\wCaixaDigital
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: anyio-4.12.1, Faker-40.1.2, asyncio-1.3.0, cov-7.0.0, django-4.11.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 13 items

caixa_nfse\tests\test_coverage_batch5.py .....FFFFF...                   [100%]

================================== FAILURES ===================================
_____ TestPortalNacionalApiClientPem.test_extrair_pem_no_key_returns_none _____
caixa_nfse\tests\test_coverage_batch5.py:19: in test_extrair_pem_no_key_returns_none
    from caixa_nfse.nfse.backends.portal_nacional.api_client import PortalNacionalApiClient
E   ImportError: cannot import name 'PortalNacionalApiClient' from 'caixa_nfse.nfse.backends.portal_nacional.api_client' (C:\Users\Rodrigo\Projetos\wCaixaDigital\caixa_nfse\nfse\backends\portal_nacional\api_client.py)
___ TestPortalNacionalApiClientPem.test_extrair_pem_exception_returns_none ____
caixa_nfse\tests\test_coverage_batch5.py:34: in test_extrair_pem_exception_returns_none
    from caixa_nfse.nfse.backends.portal_nacional.api_client import PortalNacionalApiClient
E   ImportError: cannot import name 'PortalNacionalApiClient' from 'caixa_nfse.nfse.backends.portal_nacional.api_client' (C:\Users\Rodrigo\Projetos\wCaixaDigital\caixa_nfse\nfse\backends\portal_nacional\api_client.py)
_____ TestPortalNacionalApiClientPem.test_extrair_pem_success_with_chain ______
caixa_nfse\tests\test_coverage_batch5.py:76: in test_extrair_pem_success_with_chain
    from caixa_nfse.nfse.backends.portal_nacional.api_client import PortalNacionalApiClient
E   ImportError: cannot import name 'PortalNacionalApiClient' from 'caixa_nfse.nfse.backends.portal_nacional.api_client' (C:\Users\Rodrigo\Projetos\wCaixaDigital\caixa_nfse\nfse\backends\portal_nacional\api_client.py)
________ TestPortalNacionalApiClientPem.test_del_cleans_up_temp_files _________
caixa_nfse\tests\test_coverage_batch5.py:90: in test_del_cleans_up_temp_files
    from caixa_nfse.nfse.backends.portal_nacional.api_client import PortalNacionalApiClient
E   ImportError: cannot import name 'PortalNacionalApiClient' from 'caixa_nfse.nfse.backends.portal_nacional.api_client' (C:\Users\Rodrigo\Projetos\wCaixaDigital\caixa_nfse\nfse\backends\portal_nacional\api_client.py)
____________ TestImportadorParseDate.test_parse_date_from_datetime ____________
caixa_nfse\tests\test_coverage_batch5.py:115: in test_parse_date_from_datetime
    assert result == date(2025, 6, 15)  # Line 186
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert datetime.datetime(2025, 6, 15, 10, 30) == datetime.date(2025, 6, 15)
E    +  where datetime.date(2025, 6, 15) = date(2025, 6, 15)
============================== warnings summary ===============================
caixa_nfse/tests/test_coverage_batch5.py::TestImportadorSalvarBackfillValor::test_backfill_valor_from_taxas
caixa_nfse/tests/test_coverage_batch5.py::TestImportadorConfirmarEdgeCases::test_already_quitado_skipped
  C:\Users\Rodrigo\Projetos\wCaixaDigital\.venv\Lib\site-packages\factory\django.py:182: DeprecationWarning: UserFactory._after_postgeneration will stop saving the instance after postgeneration hooks in the next major release.
  If the save call is extraneous, set skip_postgeneration_save=True in the UserFactory.Meta.
  To keep saving the instance, move the save call to your postgeneration hooks or override _after_postgeneration.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED caixa_nfse/tests/test_coverage_batch5.py::TestPortalNacionalApiClientPem::test_extrair_pem_no_key_returns_none
FAILED caixa_nfse/tests/test_coverage_batch5.py::TestPortalNacionalApiClientPem::test_extrair_pem_exception_returns_none
FAILED caixa_nfse/tests/test_coverage_batch5.py::TestPortalNacionalApiClientPem::test_extrair_pem_success_with_chain
FAILED caixa_nfse/tests/test_coverage_batch5.py::TestPortalNacionalApiClientPem::test_del_cleans_up_temp_files
FAILED caixa_nfse/tests/test_coverage_batch5.py::TestImportadorParseDate::test_parse_date_from_datetime
=================== 5 failed, 8 passed, 2 warnings in 2.16s ===================
